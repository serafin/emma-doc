Importy
=======

Importy skladaja sie z kilku warstw:
- input - obiekt odpowiedzialny za zwrocenie danych z zewnetrznego zrodla w postaci entity
- importer - wpspolpracuje z inputem, odpowiada za logike zapisu danych dostarczonych z inputa
- task - zadanie importu, tabela import, w ktorej jest zapisany ktory input, co jaki czas, polaczenie z drzewem


Input
-----

Dostep do inputow odbywa sie przez kontener `$this->module->import->input`. 
Kontener obsluguje interacje. 
Kontener zwraca nowe instancje inputow.   


Input to zywy obiekt (nie klasa) implementujacy interface `module_import_input_interface`.

```php
<?php 

interface module_import_input_interface
{

    /**
     * Zwraca opis
     * 
     * Jest wykorzystywany w panelu admina
     * Tekst nieprzetlumaczony
     * 
     * @return string
     */
    public function description();
    
    /**
     * Pobiera/ustawia importera
     * 
     * Jest ustawiany przez importera
     * Jest pobierany przez inputa dla przekazania entity do importu, aktualizacji postepu importu
     * 
     * @param module_import_importer $importer
     * @return module_import_importer
     */
    public function importer(module_import_importer $importer = null);
    
    /**
     * Dodaje elementy formularza do podanego formularza dla konfiguracji parametrow tego importu
     * 
     * @param f_form
     */
    public function appendParamToForm(f_form $form);

    /**
     * Pobiera entities
     * 
     * Pobiera wedlug parametrow. Jako podstawowe entity bierze entity z importera metoda `entity()`.
     * Pobrane entity przekazuje importerowi metoda `import(array $entity)`.
     * Informuje importera o postepie metodami `all()` i `up()`. 
     *
     * @param array $param Parametry wybrane w formularzu lub podane programatycznie
     */
    public function fetchAll(array $param);
    
    
}

?>
```

Input moze pobierac entity przez `content_origin` implementujac interface `module_import_input_fetchByContentOrigin_interface`.


```php
<?php 

interface module_import_input_fetchByContentOrigin_interface
{

    
    /**
     * Pobiera entity 
     * 
     * Dziala podobnie `module_import_input_interface->fetchAll()`
     *
     * @param array $param Parametry wybrane w formularzu lub podane programatycznie
     */
    public function fetch($content_origin);
    
}

?>
```



interface module_import_importerFrientOfInput_interface
{
    public function all($iAll);
    public function import(array $entity);        
    public function up();
    public function 
}

interface module_import_input_interface
{

    description();
    fetchAll($param)
    fetch($content_origin)
    importer()
    entity();
    appendParamToForm(f_form), wszystkie swoje wlasciwosci pakowac z prefiksem input[costam]
    
}

module_import_importer implements module_import_importer_interface
{
    input(module_import_input_interface $input = null);
    entity();
    fetchAllParam();
    contentOrigin();
    callback;
    run();
    mode();
}




$this->module->import->input->; // iteracja
$this->module->import->importer; // f_di_asNew_interface
$this->module->import->task->run()